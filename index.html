<head>
	<title>Eventbookning</title>
</head>

<body>
	{{>modal}}
	<div class="container">

		{{> eventbooking}}
		{{> blogPage}}
		<footer>Detta bokningssystem har skapats i utvecklingssyfte för kursen <a href="http://coursepress.lnu.se/kurs/moderna-applikationsmiljoer" title="Kursens webbsida">Moderna applikationsmiljöer <span>2DV400</span></a>. Den har i uppgift att visa lite om realtidswebben och hur man med javascripts-ramverket <a href="http://www.meteor.com" title="Meteors webbsida">Meteor</a> kan skapa applikationer som använder sig av just detta. Vi som har skapat denna applikation är Hans Bentlöv och Claes Tillborg och går tredje året på programmet <a href="http://coursepress.lnu.se/program/webbprogrammerare" title="Programmets webbsida">webbprogramering</a> på <a href="http://www.lnu.se" title="Linneuniversitetets webbsida">Linneuniversitetet</a> i Kalmar.</footer>
	</div>
</body>

<template name="modal">
	{{#if isModalActive}}
	<div class="modal-box wrapper">
		<div class="inside">
			<img src="images/warning.png" />
			<h3>Oops! There's been a problem.</h3>
			<p>Sorry, but we don't appear to be able to do what you asked. Please submit a bug report.</p>
			<span><span>Dismiss</span></span>
			<a href=""><span>Send Bug Report</span></a>
		</div>
	</div>
	{{/if}}
</div>
</template>

<template name="eventbooking">
<header>
	<h1>Meteor eventbokning - <a href="#" class="pressMe">tryck på mig (några gånger) för popuptest!</a></h1>
	<input type="text" id="searchBox" placeholder="Filtrera evenemang" />
</header>
<div class="main">
	<div class="categorylist three columns">
		<ul>
			<li><a href="#" class="{{categoryClass}} all">Alla evenemang<span> ({{totalNumberOfEvents}})</span></a></li>
			{{#each categories}}
			<li><a href="#" class="{{categoryClass}} {{name}}">{{name}}<span> ({{numberOfEvents}})</span></a></li>
			{{/each}}
		</ul>
	</div>
	<div class="thirteen columns">		
		{{#if isSelectedCategory}}
		{{#if isSelectedEvent}}
		{{> eventPage}} 
		{{else}}
		{{> eventlist}}
		{{/if}}
		{{/if}}
		{{#unless isSelectedCategory}}
		<p>Startsida</p>
		{{/unless}}
	</div>
	<br class="clear" />
</div>
</template>

<template name="eventlist">

{{#each event}}
<div class="nine columns alpha">
	<div class="event">
		<p><strong><a href="#" class="eventLink">{{name}}</a></strong> <span>{{formatDate date}}</span><br>
			Plats: {{location}}<br>
			Beskrivning: {{description}}<br>
			Låsta biljetter: {{tickets_locked}}</br>
			Bokade biljetter: {{tickets_booked}}</p>
		</div>
	</div>
	<div class="four columns omega">
		{{bookingSection this}}
	</div>
	<br class="clear" />
	{{/each}}
</template>

<template name="eventPage">
	{{#with event}}
	<div class="nine columns alpha">
		<h2>{{name}}</h2><span>({{formatDate date}})</span>
		<p>Plats: {{location}}<br>
			Beskrivning: {{description}}<br>
			Låsta biljetter: {{tickets_locked}}<br>
			Bokade biljetter: {{tickets_booked}}</p>
	</div>
	<div class="four columns omega">
		{{bookingSection this}}
	</div>
		<br class="clear" />
		{{/with}}
</template>

<template name="blogPage">
	<h2>Meteorbloggen</h2>
	
	<aside class="three columns postLinkList">
		{{#each postLinks}}
			<h3 class="postLink"><a href="#{{_id}}">{{title}}</a></h3>
		{{/each}}
		</ul>
	</aside>

	<section class="thirteen columns">
		{{#each post}}
			<div class="post" id="{{_id}}">
				<h3>{{title}}</h3>
				
				<aside class="three columns">
					<dl>
					  <dt>Publicerad:</dt>
					    <dd>{{formatDate date}}</dd>
					  <dt>Författare:</dt>
					    <dd>{{auther userId}}</dd>
					  <dt>Kommentarer:</dt>
					  	<dd>{{totalComments}} kommentarer</dd>
					</dl>
				</aside>

				<article class="nine columns">
					<p>{{content}}</p>
					<div class="commentList">
						<h4>Kommentarer:</h4>
					{{#each comments}}
						<div class="comment">
							<p>
								<strong>{{auther userId}}</strong>: {{content}}<span><br>
								<em>{{formatDate date}}</em></span>
							</p>
							
						</div>
					{{/each}}
					</div>
					<div class="commentBox">
						<input type="text" id="addToPost_{{_id}}" placeholder="Skriv kommentar..." />
						<input type="button" class="addComment" value="skicka"/>
					</div>		
				</article>

			</div>
		{{/each}}
		<br class="clear" />
		<div class="postBox">
			<input type="text" class="addPostTitle" placeholder="Titel..." />
			<textarea class="addPostContent" placeholder="Text..."></textarea>
			<input type="button" class="addPost" value="skicka" />
		</div>
	</section>
</template>